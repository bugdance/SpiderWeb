{
    "site"    : "快递100",
    
    "domains" : ["kuaidi100.com"],
    
    "urls"    : ["http://www.kuaidi100.com/network/clist.shtml"],
    
    "rules"   : { 
    
        "#1":{
                "follow": true,
                "regex": "/net_[0-9]+_all_all_1.htm",
                "xpath" : "//*[contains(@class,'dl-list')]//a"
        },    
        "#2":{
                "follow": null,    
                "regex": "/net_[0-9]+_[0-9]+_all_[0-9]+.htm",
                "xpath" : "//*[contains(@class,'dl-select')]//dd[2]"    
        },  
        "#3":{  
                "follow": null,
                "regex": "/net_[0-9]+_[0-9]+_all_[0-9]+.htm",
                "xpath" : "//div[contains(@id,'dy-pager')]"
        }    
    },  
    
    "loop" :"//*[contains(@class,'networkListItem')]//p[1]",
    

    
    "fields": {
                "url":          {"name": "url",             "xpath": ".//a[1]/@href"},
                "node_name":        {"name": "node_name",           "xpath": "//*[contains(@class,'kd-info')]//h1", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "company_name":        {"name": "company_name",           "xpath": "//*[contains(@class,'nav-crumbs')]//a[last()]", "regex": "(.*)网点", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": ""}]},
                "city_code":        {"name": "city_code",       "value": "${URL}", "parse": {"type": "sub", "from": "(.*)/network/net_(.*)_(.*)_all_(.*)", "to": "\\g<2>\\g<3>"}},
                "city_address":         {"name": "city_address",        "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "node_address":         {"name": "node_address",        "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "check_phone":      {"name": "check_phone",             "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "take_phone":       {"name": "take_phone",          "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "complain_phone":       {"name": "complain_phone",          "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "linkman" : {"name": "linkman",     "value": ""},
                "work_area":    {"name": "work_area",       "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "refuse_area":  {"name": "refuse_area",     "xpath": ".//a[1]/@href", "parse": {"type": "continue"}},
                "remark":       {"name": "remark",          "xpath": ".//a[1]/@href", "parse": {"type": "continue"}}
    },
    "continue": {
        "fields": {
                "node_name":        {"name": "node_name",           "xpath": "//*[contains(@class,'kd-info')]//h1", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "company_name":        {"name": "company_name",           "xpath": "//*[contains(@class,'nav-crumbs')]//a[last()]", "regex": "(.*)网点", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": ""}]},
                "city_address":         {"name": "city_address",        "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'所在地区')]//dd", "default": "", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "node_address":         {"name": "node_address",        "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'公司地址')]//dd", "default": "", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "check_phone":      {"name": "check_phone",             "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'联系电话')]//dd[1]/text()", "default": "",  "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "take_phone":       {"name": "take_phone",          "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'联系电话')]//dd[1]/text()", "default": "",  "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "complain_phone":       {"name": "complain_phone",          "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'联系电话')]//dd[1]/text()", "default": "",  "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "work_area":    {"name": "work_area",       "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'派送范围')]//dd", "default": "", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "refuse_area":  {"name": "refuse_area",     "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'不派送范围')]//dd", "default": "", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]},
                "remark":       {"name": "remark",          "xpath": "//div[contains(@class,'kd-info')]//dl[contains(.//dt,'备注')]//dd", "default": "", "parse": [{"type": "clean"},{"type": "text"},{"type": "sub", "from": "\\s+", "to": " "}]}
        }

    },

    "xproxy": {
        "file": "/home/web/scripts/configs/proxy.txt",
        "rate": 1
        },
    "settings" : {

                "mysql": "mysql://root:logis2017@localhost:33306/db_data.data_kd100_nodes",
                "download_timeout": 30,
                "download_delay": 3
    }

}
